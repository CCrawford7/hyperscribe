<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quick Notepad</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://microsoft.github.io/vscode-codicons/dist/codicon.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Roboto:wght@400;700&family=Merriweather:wght@400;700&family=Space+Mono:wght@400;700&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="popup.css">
  <link rel="stylesheet" href="modules/markdownPreview.css">
  <link rel="stylesheet" href="libs/highlight.github-dark.min.css">
</head>
<body>
  <div id="app" class="theme-light">
    <header id="toolbar" class="toolbar toolbar-expanded" aria-label="Quick Notepad toolbar">
      <button id="copyButton" class="toolbar-btn" type="button" data-short="CPY" data-tooltip="Copy note" aria-label="Copy note">
        <i class="codicon codicon-copy" aria-hidden="true"></i>
        <span class="label">Copy</span>
      </button>
      <button id="searchButton" class="toolbar-btn" type="button" data-short="FND" data-tooltip="Search notes" aria-label="Search notes">
        <i class="codicon codicon-search" aria-hidden="true"></i>
        <span class="label">Find</span>
      </button>
      <button id="clearNoteButton" class="toolbar-btn" type="button" data-short="CLR" data-tooltip="Clear note text" aria-label="Clear note text">
        <i class="codicon codicon-clear-all" aria-hidden="true"></i>
        <span class="label">Clear</span>
      </button>
      <button id="themeButton" class="toolbar-btn" type="button" data-short="THM" data-tooltip="Change theme" aria-expanded="false" aria-controls="themePanel">
        <i class="codicon codicon-symbol-color" aria-hidden="true"></i>
        <span class="label">Themes</span>
      </button>
      <button id="fontButton" class="toolbar-btn" type="button" data-short="FONT" data-tooltip="Font controls" aria-expanded="false" aria-controls="fontPanel">
        <i class="codicon codicon-text-size" aria-hidden="true"></i>
        <span class="label">Fonts</span>
      </button>
      <button id="previewButton" class="toolbar-btn" type="button" data-short="MD" data-tooltip="Toggle markdown preview" aria-label="Toggle markdown preview">
        <i class="codicon codicon-preview" aria-hidden="true"></i>
        <span class="label">Preview</span>
      </button>
      <button id="emojiButton" class="toolbar-btn" type="button" data-short="INS" data-tooltip="Insert symbols" aria-expanded="false" aria-controls="emojiPanel">
        <i class="codicon codicon-symbol-namespace" aria-hidden="true"></i>
        <span class="label">Insert</span>
      </button>
      <button id="downloadButton" class="toolbar-btn" type="button" data-short="SAVE" data-tooltip="Download as .txt" aria-label="Download as .txt">
        <i class="codicon codicon-save" aria-hidden="true"></i>
        <span class="label">Export</span>
      </button>
    </header>

    <section id="themePanel" class="panel hidden theme-panel" aria-label="Theme presets" aria-hidden="true">
      <div class="theme-grid">
        <button type="button" class="theme-chip" data-theme="default_bright" aria-pressed="false">
          <span class="theme-swatch theme-swatch-bright" aria-hidden="true"></span>
          <span class="theme-name">Default Bright</span>
        </button>
        <button type="button" class="theme-chip" data-theme="default_dark" aria-pressed="false">
          <span class="theme-swatch theme-swatch-dark" aria-hidden="true"></span>
          <span class="theme-name">Default Dark</span>
        </button>
        <button type="button" class="theme-chip" data-theme="monokai" aria-pressed="false">
          <span class="theme-swatch theme-swatch-monokai" aria-hidden="true"></span>
          <span class="theme-name">Monokai</span>
        </button>
        <button type="button" class="theme-chip" data-theme="nord" aria-pressed="false">
          <span class="theme-swatch theme-swatch-nord" aria-hidden="true"></span>
          <span class="theme-name">Nord</span>
        </button>
        <button type="button" class="theme-chip" data-theme="dracula" aria-pressed="false">
          <span class="theme-swatch theme-swatch-dracula" aria-hidden="true"></span>
          <span class="theme-name">Dracula</span>
        </button>
      </div>
    </section>

    <section id="fontPanel" class="panel hidden" aria-label="Font settings">
      <div class="panel-row">
        <label for="fontSizeControl">Font Size</label>
        <input id="fontSizeControl" type="range" min="12" max="32" step="1">
        <span id="fontSizeValue" class="value-tag">16px</span>
      </div>
      <div class="panel-row">
        <label for="fontFamilySelect">Font Family</label>
        <select id="fontFamilySelect">
          <option value="Inter, sans-serif">Inter</option>
          <option value="Roboto, sans-serif">Roboto</option>
          <option value="Merriweather, serif">Merriweather</option>
          <option value="Space Mono, monospace">Space Mono</option>
          <option value="Fira Code, monospace">Fira Code</option>
          <option value="Georgia, serif">Georgia</option>
        </select>
      </div>
      <div class="panel-row toggles">
        <button id="boldToggle" type="button" class="toggle-btn" aria-pressed="false">Bold</button>
        <button id="italicToggle" type="button" class="toggle-btn" aria-pressed="false">Italic</button>
      </div>
    </section>

    <section id="emojiPanel" class="panel hidden" aria-label="Emoji picker">
      <div id="emojiGrid" class="emoji-grid" role="grid" aria-live="polite"></div>
    </section>

    <div id="searchBar" class="search-bar hidden" role="region" aria-label="Search and replace">
      <div class="search-controls">
        <input type="text" id="searchInput" placeholder="Find..." aria-label="Search text">
        <button id="searchPrev" class="search-btn" type="button" title="Previous (Shift+Enter)" aria-label="Find previous">
          <i class="codicon codicon-arrow-up" aria-hidden="true"></i>
        </button>
        <button id="searchNext" class="search-btn" type="button" title="Next (Enter)" aria-label="Find next">
          <i class="codicon codicon-arrow-down" aria-hidden="true"></i>
        </button>
        <span id="searchCount" class="search-count" aria-live="polite">0 / 0</span>
        <button id="toggleReplace" class="search-btn" type="button" title="Toggle replace panel" aria-label="Toggle replace options" aria-controls="replaceControls" aria-expanded="false">
          <i class="codicon codicon-arrow-swap" aria-hidden="true"></i>
        </button>
        <button id="searchClose" class="search-btn" type="button" title="Close (Esc)" aria-label="Close search">
          <i class="codicon codicon-close" aria-hidden="true"></i>
        </button>
      </div>
      <div id="replaceControls" class="replace-controls hidden">
        <input type="text" id="replaceInput" placeholder="Replace with..." aria-label="Replacement text">
        <div class="replace-actions">
          <button id="replaceBtn" class="search-btn" type="button">Replace</button>
          <button id="replaceAllBtn" class="search-btn" type="button">Replace All</button>
        </div>
      </div>
      <div class="search-options">
        <label>
          <input type="checkbox" id="searchCaseSensitive">
          <span>Aa</span>
        </label>
        <label>
          <input type="checkbox" id="searchWholeWord">
          <span>Whole</span>
        </label>
        <label>
          <input type="checkbox" id="searchRegex">
          <span>Regex</span>
        </label>
      </div>
    </div>

    <div class="note-container">
      <div id="editorContainer" class="editor-container edit-only">
        <textarea id="noteArea" class="note-area" placeholder="Type your note..." aria-label="Note text area" autofocus spellcheck="false"></textarea>
        <div id="previewPane" class="preview-pane hidden" aria-label="Markdown preview" role="region"></div>
      </div>
    </div>

    <footer class="status-bar">
      <span id="storageUsage" class="storage-usage" aria-live="polite">Storage: --</span>
      <button id="clearStorageButton" type="button" class="status-btn icon-only" data-tooltip="Reset saved note and preferences" aria-label="Clear saved data">
        <i class="codicon codicon-database" aria-hidden="true"></i>
      </button>
    </footer>

    <div id="confirmOverlay" class="confirm-overlay hidden" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="confirmMessage">
      <div class="confirm-panel">
        <p id="confirmMessage" class="confirm-message">Confirm action?</p>
        <div class="confirm-actions">
          <button id="confirmCancelButton" type="button" class="status-btn" data-tooltip="Cancel action">
            <i class="codicon codicon-discard" aria-hidden="true"></i>
            <span class="label">Cancel</span>
          </button>
          <button id="confirmAcceptButton" type="button" class="status-btn confirm" data-tooltip="Proceed with action">
            <i class="codicon codicon-check" aria-hidden="true"></i>
            <span class="label">Confirm</span>
          </button>
        </div>
        <label class="confirm-checkbox">
          <input id="confirmDontAskCheckbox" type="checkbox">
          <span>Don't ask again</span>
        </label>
      </div>
    </div>
    <button id="closePopupButton" class="close-dot" type="button" aria-label="Close Quick Notepad"></button>
    <div id="resizeHandle" class="resize-handle" role="presentation" aria-hidden="true"></div>
  </div>

  <script src="libs/marked.min.js"></script>
  <script src="libs/purify.min.js"></script>
  <script src="libs/highlight.min.js"></script>
  <script src="libs/highlight.javascript.min.js"></script>
  <script src="libs/highlight.python.min.js"></script>
  <script src="libs/highlight.json.min.js"></script>
  <script src="libs/highlight.css.min.js"></script>
  <script src="libs/highlight.html.min.js"></script>
  <script type="module" src="popup.js"></script>
</body>
</html>
